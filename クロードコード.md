# Claude Code 掲示板システム開発ドキュメント

## 📋 要件定義

### システム概要
**プロジェクト名**: 掲示板システム（Board System）  
**開発期間**: 2025年8月24日 開始  
**開発者**: Claude Code（AI アシスタント）  
**目的**: Next.js 15とMongoDB Atlasを使用した、完全なCRUD機能を持つ掲示板アプリケーションの構築

### 機能要件

#### 1. 投稿管理機能（CRUD）
- **Create（作成）**: 新規投稿の作成
  - タイトル（必須）
  - 内容（必須）
  - 投稿者名（必須）
  - 作成日時（自動設定）

- **Read（読み取り）**: 投稿の表示
  - 投稿一覧表示（新しい順）
  - 個別投稿詳細表示
  - 投稿者名・作成日時表示

- **Update（更新）**: 投稿の編集
  - タイトル・内容の編集
  - 更新日時の自動更新
  - モーダルダイアログでの編集UI

- **Delete（削除）**: 投稿の削除
  - 削除確認ダイアログ
  - 完全削除（論理削除ではない）

#### 2. UI/UX要件
- **レスポンシブデザイン**: モバイル・タブレット・デスクトップ対応
- **Material UI**: モダンで統一されたUIコンポーネント
- **日本語対応**: 完全日本語UI
- **エラーハンドリング**: 分かりやすいエラーメッセージ表示
- **ローディング状態**: 操作中の視覚的フィードバック

#### 3. 技術要件
- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript
- **データベース**: MongoDB Atlas
- **UIライブラリ**: Material UI v6
- **HTTPクライアント**: Axios
- **開発環境**: Cursor + Claude Code

---

## 🏗 システム設計

### アーキテクチャ
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   Database      │
│   (Next.js)     │◄──►│   (API Routes)  │◄──►│   (MongoDB)     │
│                 │    │                 │    │                 │
│ - React         │    │ - Next.js API   │    │ - MongoDB Atlas │
│ - Material UI   │    │ - MongoDB       │    │ - Collections:  │
│ - TypeScript    │    │ - TypeScript    │    │   * posts       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### データベース設計

#### Posts Collection
```typescript
{
  _id: ObjectId,           // MongoDB自動生成ID
  title: string,           // 投稿タイトル
  content: string,         // 投稿内容
  author: string,          // 投稿者名
  createdAt: Date,         // 作成日時
  updatedAt: Date          // 更新日時
}
```

### API設計

#### エンドポイント一覧
| メソッド | パス | 説明 | レスポンス |
|---------|------|------|------------|
| GET | `/api/posts` | 投稿一覧取得 | `Post[]` |
| POST | `/api/posts` | 新規投稿作成 | `Post` |
| GET | `/api/posts/[id]` | 個別投稿取得 | `Post` |
| PUT | `/api/posts/[id]` | 投稿更新 | `Post` |
| DELETE | `/api/posts/[id]` | 投稿削除 | `{message: string}` |

---

## 📂 ディレクトリ構造

### 完成時のプロジェクト構造
```
board-app/
├── public/                          # 静的ファイル
│   ├── next.svg
│   ├── vercel.svg
│   └── favicon.ico
├── src/
│   ├── app/                         # App Router ページ
│   │   ├── api/                     # API Routes
│   │   │   └── posts/               # 投稿関連API
│   │   │       ├── route.ts         # GET /api/posts, POST /api/posts
│   │   │       └── [id]/
│   │   │           └── route.ts     # GET/PUT/DELETE /api/posts/[id]
│   │   ├── globals.css              # グローバルスタイル
│   │   ├── layout.tsx               # ルートレイアウト
│   │   ├── page.tsx                 # メインページ（投稿一覧・作成）
│   │   └── providers.tsx            # Context Providers
│   ├── components/                  # 再利用可能コンポーネント
│   │   ├── PostCard.tsx            # 投稿カードコンポーネント
│   │   └── PostForm.tsx            # 投稿フォームコンポーネント
│   ├── lib/                        # ユーティリティ・設定
│   │   ├── mongodb.ts              # MongoDB接続設定
│   │   └── theme.ts                # Material UI テーマ設定
│   └── types/                      # TypeScript 型定義
│       └── post.ts                 # Post関連型定義
├── .env.local                      # 環境変数（MongoDB URI等）
├── .eslintrc.json                  # ESLint設定
├── .gitignore                      # Git除外ファイル
├── next.config.js                  # Next.js設定
├── package.json                    # プロジェクト依存関係
├── README.md                       # プロジェクト説明
├── tailwind.config.ts              # Tailwind CSS設定
└── tsconfig.json                   # TypeScript設定
```

### 主要ファイルの役割

#### `/src/lib/mongodb.ts`
- MongoDB Atlasへの接続管理
- 開発・本番環境での接続プール管理
- データベース取得関数

#### `/src/types/post.ts`
- Post インターface定義
- CreatePostInput インターface定義  
- UpdatePostInput インターface定義

#### `/src/app/api/posts/route.ts`
- GET: 投稿一覧取得（作成日降順）
- POST: 新規投稿作成（バリデーション付き）

#### `/src/app/api/posts/[id]/route.ts`
- GET: ID指定投稿取得
- PUT: 投稿更新
- DELETE: 投稿削除

#### `/src/components/PostCard.tsx`
- 個別投稿の表示コンポーネント
- 編集・削除ボタン
- 日付フォーマット表示

#### `/src/components/PostForm.tsx`
- 投稿作成・編集フォーム
- バリデーション機能
- エラーハンドリング

#### `/src/app/page.tsx`
- メインページコンポーネント
- CRUD操作の統合管理
- 状態管理（投稿一覧、編集、削除）

---

## 🛠 技術スタック詳細

### フロントエンド
- **Next.js 15**: App Router使用、最新機能活用
- **React 19**: 関数コンポーネント、hooks活用  
- **TypeScript 5**: 型安全性確保
- **Material UI 6**: UIコンポーネントライブラリ
- **Axios**: HTTP通信ライブラリ
- **date-fns**: 日付フォーマットライブラリ

### バックエンド
- **Next.js API Routes**: サーバーサイド実装
- **MongoDB Native Driver**: データベース操作
- **Mongoose**: ODM（予定、現在は Native Driver使用）

### 開発環境
- **Node.js**: 18.17.0以上
- **npm**: パッケージマネージャー
- **ESLint**: コード品質管理
- **Prettier**: コードフォーマット（設定予定）

---

## 🎨 UI/UX設計

### カラーパレット
- **プライマリ**: #1976d2 (Material UI Blue)
- **セカンダリ**: #dc004e (Material UI Pink)  
- **エラー**: #d32f2f (Material UI Red)
- **背景**: #ffffff (White)

### コンポーネント設計思想
- **再利用性**: 汎用的なコンポーネント設計
- **アクセシビリティ**: Material UIのアクセシビリティ標準準拠
- **レスポンシブ**: モバイルファーストデザイン
- **一貫性**: Material Design原則に従ったUI

---

## 🔧 環境設定

### 必要な環境変数
```env
MONGODB_URI=mongodb+srv://[username]:[password]@[cluster].mongodb.net/boardDB?retryWrites=true&w=majority
```

### 開発用コマンド
```bash
# 開発サーバー起動
npm run dev

# ビルド
npm run build

# 本番サーバー起動
npm run start

# リント実行
npm run lint
```

---

## 📊 開発進捗

### ✅ 完了した機能
- [x] Next.js 15プロジェクト初期化
- [x] TypeScript設定
- [x] MongoDB Atlas接続設定
- [x] 基本的なCRUD API実装
- [x] Material UI統合
- [x] PostCard コンポーネント
- [x] PostForm コンポーネント
- [x] メインページ実装
- [x] エラーハンドリング
- [x] レスポンシブデザイン
- [x] 開発サーバー起動確認

### 🔄 進行中
- [ ] CRUD操作の動作テスト
- [ ] エラーケースの詳細テスト

### 📋 今後の予定
- [ ] 単体テスト実装（Jest）
- [ ] E2Eテスト実装（Playwright）
- [ ] パフォーマンス最適化
- [ ] 本番環境デプロイ（Vercel）
- [ ] カスタムドメイン設定

---

## 🚀 デプロイメント計画

### 段階的デプロイメント
1. **ローカル開発**: http://localhost:3003
2. **テスト環境**: Vercel Preview環境
3. **本番環境**: Vercel Production環境
4. **カスタムドメイン**: 独自ドメイン設定

### パフォーマンス目標
- **Lighthouse スコア**: 70+
- **First Contentful Paint**: 1.5秒以下
- **Time to Interactive**: 3秒以下

---

## 📝 品質保証

### テスト戦略
- **単体テスト**: コンポーネント・API関数
- **統合テスト**: API エンドポイント
- **E2Eテスト**: ユーザーシナリオ
- **カバレッジ**: 70%以上

### セキュリティ対策
- **入力値バリデーション**: API レベル・フロントエンド両方
- **エラーハンドリング**: 詳細エラー情報の非表示
- **環境変数**: 機密情報の適切な管理

---

*このドキュメントは開発と共に継続的に更新されます*  
*最終更新: 2025年8月24日*